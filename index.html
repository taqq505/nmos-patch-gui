<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ST2110 BCC - Broadcast Control Center</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="css/style.css">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MCNDPMHMNN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-MCNDPMHMNN');
    </script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <img class="logo-icon" src="favicon.svg" alt="NMOS Simple BCC">
                    <h1>NMOS Simple BCC</h1>
                </div>
                <div class="header-actions">
                    <button id="connectRdsBtn" class="btn btn-primary">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
                        </svg>
                        Connect RDS
                    </button>
                    <button id="addNodeBtn" class="btn btn-secondary">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="8" x2="12" y2="16"/>
                            <line x1="8" y1="12" x2="16" y2="12"/>
                        </svg>
                        Add Node
                    </button>
                    <button id="settingsBtn" class="btn btn-secondary">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.8 1.8 0 0 0 .34 1.98l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.8 1.8 0 0 0-1.98-.34 1.8 1.8 0 0 0-1.08 1.64V21a2 2 0 1 1-4 0v-.09a1.8 1.8 0 0 0-1.08-1.64 1.8 1.8 0 0 0-1.98.34l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.8 1.8 0 0 0 4.6 15a1.8 1.8 0 0 0-1.64-1.08H2a2 2 0 1 1 0-4h.96a1.8 1.8 0 0 0 1.64-1.08 1.8 1.8 0 0 0-.34-1.98l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.8 1.8 0 0 0 1.98.34H9a1.8 1.8 0 0 0 1.08-1.64V3a2 2 0 1 1 4 0v.09c0 .7.4 1.33 1.08 1.64.6.26 1.3.15 1.98-.34l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06c-.5.5-.6 1.2-.34 1.98.27.68.9 1.08 1.64 1.08H22a2 2 0 1 1 0 4h-.09c-.7 0-1.33.4-1.64 1.08z"/>
                        </svg>
                        Settings
                    </button>
                    <button id="aboutBtn" class="btn btn-secondary">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 8v4"/>
                            <path d="M12 16h.01"/>
                        </svg>
                        About
                    </button>
                </div>
            </div>
        </header>

        <!-- Node Selectors -->
        <div class="node-selectors">
            <div class="node-selector">
                <label for="senderNodeSelect">Sender Node:</label>
                <select id="senderNodeSelect" class="node-select">
                    <option value="">Select sender node...</option>
                </select>
                <button id="refreshSenderBtn" class="btn-icon" title="Refresh Senders">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 4 23 10 17 10"/>
                        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                    </svg>
                </button>
            </div>
            <div class="node-selector">
                <label for="receiverNodeSelect">Receiver Node:</label>
                <select id="receiverNodeSelect" class="node-select">
                    <option value="">Select receiver node...</option>
                </select>
                <button id="refreshReceiverBtn" class="btn-icon" title="Refresh Receivers">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="23 4 23 10 17 10"/>
                        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Main Control Panel -->
        <div class="control-panel">
            <!-- Senders Panel -->
            <div class="panel senders-panel">
                <div class="panel-header">
                    <h2>Senders</h2>
                    <div class="filter-group">
                        <input type="text" id="senderFilter" class="filter-input" placeholder="Search senders...">
                        <select id="senderFormatFilter" class="format-filter">
                            <option value="">All Formats</option>
                            <option value="video">Video</option>
                            <option value="audio">Audio</option>
                            <option value="data">Data</option>
                            <option value="mux">Mux</option>
                        </select>
                        <button id="refreshSendersBtn" class="btn-icon" title="Refresh sender connections">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"/>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="senderList" class="item-list">
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="7" width="20" height="14" rx="2"/>
                            <path d="M16 3h4v4M8 3H4v4"/>
                        </svg>
                        <p>No senders available</p>
                        <small>Add a node with IS-04 URL</small>
                    </div>
                </div>
            </div>

            <!-- TAKE Button -->
            <div class="take-button-container">
                <button id="takeBtn" class="take-button" disabled>
                    <svg class="take-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="9 18 15 12 9 6"/>
                    </svg>
                    <span>TAKE</span>
                </button>
                <div class="connection-status">
                    <div class="status-indicator"></div>
                    <span id="statusText">Select sender and receiver</span>
                    <a id="corsHelpLink" class="status-link hidden" href="#">CORS対処</a>
                </div>
            </div>

            <!-- Receivers Panel -->
            <div class="panel receivers-panel">
                <div class="panel-header">
                    <h2>Receivers</h2>
                    <div class="filter-group">
                        <input type="text" id="receiverFilter" class="filter-input" placeholder="Search receivers...">
                        <select id="receiverFormatFilter" class="format-filter">
                            <option value="">All Formats</option>
                            <option value="video">Video</option>
                            <option value="audio">Audio</option>
                            <option value="data">Data</option>
                            <option value="mux">Mux</option>
                        </select>
                        <button id="refreshReceiversBtn" class="btn-icon" title="Refresh receiver connections">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"/>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="receiverList" class="item-list">
                    <div class="empty-state">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="7" width="20" height="14" rx="2"/>
                            <path d="M16 21v-2M8 21v-2"/>
                        </svg>
                        <p>No receivers available</p>
                        <small>Add a node with IS-04 URL</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Add Node -->
    <div id="addNodeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add NMOS Node</h2>
                <button class="modal-close">&times;</button>
            </div>
            <form id="addNodeForm">
                <div class="form-group">
                    <label for="nodeName">Node Name</label>
                    <input type="text" id="nodeName" name="nodeName" placeholder="Studio A Camera" required>
                </div>
                <div class="form-group">
                    <label for="is04Url">IS-04 URL</label>
                    <input type="url" id="is04Url" name="is04Url" placeholder="http://192.168.1.10:3000" required>
                    <small>Enter the NMOS IS-04 Node API URL. IS-05 will be auto-discovered.</small>
                    <!-- <small class="port-helper">Don't know the port number? Try <a href="https://taqq505.github.io/nmos-port-explorer-gui/" target="_blank" rel="noopener">Port Explorer</a></small> -->
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelAddNode">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                        Add Node
                    </button>
                </div>
            </form>
            <div id="addNodeProgress" class="progress-container" style="display: none;">
                <div class="spinner"></div>
                <p>Discovering NMOS node...</p>
            </div>
        </div>
    </div>

    <!-- Modal: Connect RDS -->
    <div id="connectRdsModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Connect to NMOS Registry (RDS)</h2>
                <button class="modal-close">&times;</button>
            </div>
            <form id="connectRdsForm" style="display: block;">
                <div class="form-group">
                    <label for="rdsUrl">Registry Query API URL</label>
                    <input type="url" id="rdsUrl" name="rdsUrl" placeholder="http://192.168.1.100:3001" required>
                    <small>Enter the NMOS IS-04 Query API URL </small>
                    <!-- <small class="port-helper">Don't know the port number? Try <a href="https://taqq505.github.io/nmos-port-explorer-gui/" target="_blank" rel="noopener">Port Explorer</a></small> -->
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelConnectRds">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 1v6m0 6v6"/>
                        </svg>
                        Discover Nodes
                    </button>
                </div>
            </form>
            <div id="rdsProgress" class="progress-container" style="display: none;">
                <div class="spinner"></div>
                <p>Discovering nodes from registry...</p>
            </div>
            <div id="rdsNodeList" class="rds-node-list" style="display: none;">
                <div class="rds-header">
                    <h3>Available Nodes</h3>
                    <label class="select-all-label">
                        <input type="checkbox" id="selectAllNodes" class="select-all-checkbox">
                        <span>Select All</span>
                    </label>
                </div>
                <div id="rdsNodes"></div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelRdsSelection">Cancel</button>
                    <button type="button" class="btn btn-primary" id="addSelectedNodes">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                        Add Selected Nodes
                    </button>
                </div>
            </div>
            <div id="rdsAddProgress" class="rds-add-progress" style="display: none;">
                <h3>Adding Nodes...</h3>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="rdsProgressBar"></div>
                </div>
                <p id="rdsProgressText">Initializing...</p>
                <div id="rdsProgressDetails" class="progress-details"></div>
            </div>
        </div>
    </div>

    <!-- Modal: Settings -->
    <div id="settingsModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="settings-content">
                <!-- Tabs -->
                <div class="settings-tabs">
                    <button class="settings-tab active" data-tab="history">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        Patch History
                    </button>
                    <button class="settings-tab" data-tab="reset">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                            <path d="M21 3v5h-5"/>
                            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                            <path d="M3 21v-5h5"/>
                        </svg>
                        Reset
                    </button>
                    <button class="settings-tab" data-tab="cors">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 8v4"/>
                            <path d="M12 16h.01"/>
                        </svg>
                        CORS
                    </button>
                    <button class="settings-tab" data-tab="howitworks">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                        How It Works
                    </button>
                    <button class="settings-tab" data-tab="about">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2l10 6v8l-10 6-10-6V8l10-6z"/>
                            <path d="M12 22V12"/>
                            <path d="M22 8L12 12 2 8"/>
                        </svg>
                        About
                    </button>
                </div>

                <!-- Tab Content: History -->
                <div id="historyTab" class="settings-tab-content active">
                    <div id="historyContent" class="history-list">
                        <div class="empty-state">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                            <p>No patch history</p>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: Reset -->
                <div id="resetTab" class="settings-tab-content">
                    <div class="reset-section">
                        <div class="reset-warning">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                <line x1="12" y1="9" x2="12" y2="13"/>
                                <line x1="12" y1="17" x2="12.01" y2="17"/>
                            </svg>
                            <h3>Reset Application Data</h3>
                            <p>This will permanently delete all stored data including:</p>
                            <ul>
                                <li>All registered NMOS nodes</li>
                                <li>Patch history</li>
                                <li>All application settings</li>
                            </ul>
                            <p><strong>This action cannot be undone.</strong></p>
                        </div>
                        <div class="reset-actions">
                            <button id="clearHistoryBtn" class="btn btn-secondary">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="3 6 5 6 21 6"/>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                </svg>
                                Clear History Only
                            </button>
                            <button id="resetAllBtn" class="btn btn-danger">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                                    <path d="M21 3v5h-5"/>
                                    <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                                    <path d="M3 21v-5h5"/>
                                </svg>
                                Reset All Data
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: CORS -->
                <div id="corsTab" class="settings-tab-content">
                    <div class="cors-warning">
                        <h3>⚠ CORS Workaround (Dev Only)</h3>
                        <p>Browsers block PATCH requests to devices without proper CORS headers.</p>
                        <p>If the device cannot be updated, you can launch Chrome in a temporary CORS-disabled mode for testing.</p>
                        <p><strong>Windows steps:</strong> You can either run the command from the Run dialog (Win+R) or paste it into the Target field of a Chrome shortcut and launch it.</p>
                        <p><strong>macOS/Linux:</strong> Run the command below from a terminal to launch a separate temporary profile.</p>

                        <div class="cors-command">
                            <div class="cors-command-header">
                                <span>Windows</span>
                                <button class="copy-btn" data-copy="&quot;C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe&quot; --disable-web-security --user-data-dir=%TEMP%\\chrome_dev">Copy</button>
                            </div>
                            <pre class="cors-command-body"><code>"C:\Program Files\Google\Chrome\Application\chrome.exe" --disable-web-security --user-data-dir=%TEMP%\chrome_dev</code></pre>
                        </div>

                        <div class="cors-command">
                            <div class="cors-command-header">
                                <span>macOS</span>
                                <button class="copy-btn" data-copy="open -na &quot;Google Chrome&quot; --args --disable-web-security --user-data-dir=/tmp/chrome_dev">Copy</button>
                            </div>
                            <pre class="cors-command-body"><code>open -na "Google Chrome" --args --disable-web-security --user-data-dir=/tmp/chrome_dev</code></pre>
                        </div>

                        <div class="cors-command">
                            <div class="cors-command-header">
                                <span>Linux</span>
                                <button class="copy-btn" data-copy="google-chrome --disable-web-security --user-data-dir=/tmp/chrome_dev">Copy</button>
                            </div>
                            <pre class="cors-command-body"><code>google-chrome --disable-web-security --user-data-dir=/tmp/chrome_dev</code></pre>
                        </div>

                        <p><strong>Warning:</strong> This mode is unsafe. Use it only for temporary testing.</p>
                    </div>
                </div>

                <!-- Tab Content: How It Works -->
                <div id="howitworksTab" class="settings-tab-content">
                    <div class="how-it-works">
                        <h3>How It Works</h3>
                        <div class="feature-list">
                            <div class="feature-item feature-highlight">
                                <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                <div>
                                    <strong>Browser-Only</strong>
                                    <p>No installation required. Runs entirely in your web browser using pure JavaScript.</p>
                                </div>
                            </div>
                            <div class="feature-item feature-highlight">
                                <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                <div>
                                    <strong>Local Processing</strong>
                                    <p>All data stored locally in localStorage. No external servers or data transmission.</p>
                                </div>
                            </div>
                            <div class="feature-item feature-warning">
                                <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                    <line x1="12" y1="9" x2="12" y2="13"/>
                                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                                </svg>
                                <div>
                                    <strong>Network Requirement</strong>
                                    <p>Your browser must have network access to NMOS nodes (IS-04/IS-05 endpoints).</p>
                                </div>
                            </div>
                        </div>
                        <div class="architecture-diagram">
                            <div class="arch-node">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <path d="M3 9h18M9 21V9"/>
                                </svg>
                                <span>Your Browser</span>
                            </div>
                            <div class="arch-arrow">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="5" y1="12" x2="19" y2="12"/>
                                    <polyline points="12 5 19 12 12 19"/>
                                </svg>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="19" y1="12" x2="5" y2="12"/>
                                    <polyline points="12 5 5 12 12 19"/>
                                </svg>
                            </div>
                            <div class="arch-node">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="3"/>
                                    <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
                                </svg>
                                <span>NMOS Nodes</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: About -->
                <div id="aboutTab" class="settings-tab-content">
                    <div class="about-section">
                        <h3>About NMOS Simple BCC <span class="version-tag">v2026.02.16</span></h3>
                        <p>A lightweight, browser-only NMOS IS-04/IS-05 patching tool for ST 2110 routing.</p>

                        <h4>Links</h4>
                        <ul class="about-links">
                            <li>
                                <svg class="link-icon github-icon" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                </svg>
                                <strong>This Project:</strong>
                                <a href="https://github.com/taqq505/nmos-patch-gui" target="_blank" rel="noopener">
                                    GitHub Repository
                                    <svg class="external-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3"/>
                                    </svg>
                                </a>
                                /
                                <a href="https://github.com/taqq505/nmos-patch-gui/issues" target="_blank" rel="noopener">
                                    Issues
                                    <svg class="external-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3"/>
                                    </svg>
                                </a>
                            </li>
                            <li>
                                <svg class="link-icon user-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                    <circle cx="12" cy="7" r="4"/>
                                </svg>
                                <strong>Developer:</strong>
                                <a href="https://github.com/taqq505" target="_blank" rel="noopener">
                                    taqq505 on GitHub
                                    <svg class="external-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3"/>
                                    </svg>
                                </a>
                            </li>
                            <li>
                                <svg class="link-icon globe-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <line x1="2" y1="12" x2="22" y2="12"/>
                                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                                </svg>
                                <strong>Other Projects:</strong>
                                <a href="https://taqq505.github.io/mmam-website" target="_blank" rel="noopener">
                                    MMAM Website
                                    <svg class="external-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3"/>
                                    </svg>
                                </a>
                            </li>
                        </ul>

                        <!-- Accordion: Privacy Policy -->
                        <div class="accordion-item">
                            <button class="accordion-header" data-accordion="privacy">
                                <svg class="accordion-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                                <span>Privacy Policy</span>
                            </button>
                            <div class="accordion-content" id="accordion-privacy">
                                <div class="privacy-content">
                                    <h5>Information Collection and Use</h5>
                                    <p>This tool is a browser-only application. All data is stored locally in your browser's localStorage and is never transmitted to external servers except as described below.</p>

                                    <h5>Cookies and Analytics</h5>
                                    <p>We use Google Analytics to understand how visitors use this tool. Google Analytics uses cookies to collect anonymous information including:</p>
                                    <ul>
                                        <li>Pages visited and time spent on the site</li>
                                        <li>Browser type and device information</li>
                                        <li>Approximate geographic location (country/city level)</li>
                                    </ul>
                                    <p>This data helps us improve the tool. No personally identifiable information is collected.</p>

                                    <h5>Third-Party Services</h5>
                                    <p>This site may use Google AdSense to display advertisements. Google may use cookies to serve ads based on your prior visits to this or other websites. You can opt out of personalized advertising by visiting <a href="https://www.google.com/settings/ads" target="_blank" rel="noopener">Google's Ads Settings</a>.</p>

                                    <h5>Your Rights</h5>
                                    <p>You can:</p>
                                    <ul>
                                        <li>Decline cookies via the banner when you first visit</li>
                                        <li>Clear all locally stored data via Settings → Reset</li>
                                        <li>Disable cookies in your browser settings</li>
                                        <li>Opt out of Google Analytics by installing the <a href="https://tools.google.com/dlpage/gaoptout" target="_blank" rel="noopener">Google Analytics Opt-out Browser Add-on</a></li>
                                    </ul>

                                    <h5>Contact</h5>
                                    <p>Questions about this privacy policy? Contact via <a href="https://github.com/taqq505" target="_blank" rel="noopener">GitHub</a>.</p>

                                    <p class="privacy-updated"><small>Last updated: December 24, 2024</small></p>
                                </div>
                            </div>
                        </div>

                        <!-- Accordion: License & Credits -->
                        <div class="accordion-item">
                            <button class="accordion-header" data-accordion="license">
                                <svg class="accordion-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                                <span>License & Credits</span>
                            </button>
                            <div class="accordion-content" id="accordion-license">
                                <p><strong>License:</strong> MIT License (see LICENSE)</p>
                                <p><strong>Rights:</strong> © 2024. All rights reserved. Permissions granted under the MIT License.</p>
                                <p><strong>Credits:</strong> NMOS IS-04/IS-05 specifications by AMWA.</p>
                            </div>
                        </div>

                        <div class="support-section">
                            <p class="support-text">If this tool helped your workflow, consider buying me a coffee ☕</p>
                            <a href="https://paypal.me/taqq505" target="_blank" rel="noopener" class="support-link">
                                <svg class="paypal-icon" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M8.32 21.97a.546.546 0 0 1-.26-.32c-.03-.15-.01-.89.26-2.89a.5.5 0 0 1 .49-.42h2.84c1.66 0 2.95-.33 3.84-1 .89-.67 1.48-1.69 1.76-3.05.28-1.36.21-2.48-.2-3.37-.4-.88-1.17-1.54-2.29-1.97a7.5 7.5 0 0 0-3.26-.65H8.74a.74.74 0 0 0-.73.62L6.2 20.23a.55.55 0 0 1-.54.47H3.02a.5.5 0 0 1-.49-.6L4.62 5.23a1.5 1.5 0 0 1 1.48-1.26h6.37c1.74 0 3.15.24 4.23.73 1.07.49 1.85 1.21 2.32 2.17.47.96.63 2.15.46 3.56-.16 1.37-.55 2.55-1.16 3.55-.61.99-1.43 1.76-2.46 2.31-1.02.55-2.25.82-3.68.82h-2.1c-.2 0-.37.14-.41.34l-.44 2.73a.75.75 0 0 1-.74.63H8.32z"/>
                                </svg>
                                <span>Support via PayPal</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enable/Disable Warning Modal -->
    <div id="enableWarningModal" class="modal hidden">
        <div class="modal-content warning-modal">
            <div class="modal-header warning-header">
                <svg class="warning-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                    <line x1="12" y1="9" x2="12" y2="13"/>
                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
                <h2 id="warningModalTitle">Enable/Disable Warning</h2>
            </div>
            <div class="modal-body warning-body">
                <div id="warningModalContent"></div>
            </div>
            <div class="form-actions">
                <button id="warningCancel" class="btn btn-secondary">Cancel</button>
                <button id="warningConfirm" class="btn btn-danger">I Understand, Proceed</button>
            </div>
        </div>
    </div>

    <!-- Resource Detail Modal -->
    <div id="resourceDetailModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="resourceDetailTitle">Resource Details</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="resource-detail-body">
                <div class="detail-section" id="activeSection">
                    <div class="detail-section-header">
                        <h3>Active Connection (IS-05)</h3>
                        <button id="copyActiveBtn" class="btn btn-small" title="Copy JSON to clipboard">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                            </svg>
                            Copy
                        </button>
                    </div>
                    <pre id="activeContent" class="detail-code"></pre>
                </div>
                <div class="detail-section" id="sdpSection" style="display: none;">
                    <div class="detail-section-header">
                        <h3>SDP (Transport File)</h3>
                        <button id="copySdpBtn" class="btn btn-small" title="Copy SDP to clipboard">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                            </svg>
                            Copy
                        </button>
                    </div>
                    <pre id="sdpContent" class="detail-code"></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>
    <div id="corsAlert" class="cors-alert hidden">
        <div class="cors-alert-content">
            <span>CORS error — click here</span>
            <button id="corsAlertClose" class="cors-alert-close" aria-label="Close">&times;</button>
        </div>
    </div>

    <!-- Cookie Consent Banner -->
    <div id="cookieConsent" class="cookie-consent hidden">
        <div class="cookie-consent-content">
            <svg class="cookie-icon" viewBox="0 0 24 24" fill="currentColor">
                <circle cx="12" cy="12" r="10"/>
                <circle cx="8" cy="10" r="1.5" fill="#1a1a2e"/>
                <circle cx="16" cy="10" r="1.5" fill="#1a1a2e"/>
                <circle cx="10" cy="15" r="1.5" fill="#1a1a2e"/>
                <circle cx="15" cy="14" r="1.5" fill="#1a1a2e"/>
                <circle cx="12" cy="7" r="1" fill="#1a1a2e"/>
            </svg>
            <div class="cookie-text">
                <p>We use cookies to improve your experience and analyze site usage. By continuing, you accept our use of cookies.</p>
                <a href="#privacy" class="cookie-learn-more" id="cookieLearnMore">Learn more</a>
            </div>
            <div class="cookie-buttons">
                <button id="cookieDecline" class="btn-cookie btn-cookie-decline">Decline</button>
                <button id="cookieAccept" class="btn-cookie btn-cookie-accept">Accept</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>
